<html>
    <head>
    	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.0-rc.3/dist/leaflet.css" />
    	<script src="https://unpkg.com/leaflet@1.0.0-rc.3/dist/leaflet.js"></script>
        <script src="js/leaflet.ajax.min.js"></script>
        

        <title>LAUSD Schools Interactive Map</title>
        <meta name="tags" content="LAUSD, schools, maps, geojson" />
        <meta name="date" content="2016-09-08 16:30" />
        <meta name="modified" content="2016-09-08 16:30" />
        <meta name="category" content="Projects" />
        <meta name="author" content="Andres Avalos" />
        <meta name="summary" content="Map displaying LAUSD schools" />

        <style>
        #mapid { height: 80%;
        		 width: 80%; }

        body { font-family: "Arial";
        		color: white;
        		background-color: #636363;
        		font-size: 35;
        		padding-top: 25px
        	}
        </style>

    </head>
    <body>
        
         <center>
         Schools in Los Angeles Unified School District
         <br>
         <br>
         <div id="mapid"></div>
         </center>


         <script> 
        	var myStyle = {
		        "color": "#c51b8a",
		        "weight": 0.5,
		        "opacity": 0.90,
		        "stroke": true
		    };

		    var mouseStyle = {
		    	"color": "#c51b8a",
		        "weight": 2,
		        "opacity": 0.95,
		        "stroke": true
		    }

			function onEachFeature(feature, layer) {
			    // does this feature have a property named popupContent?
			    if (feature.properties) {

			    	if (feature.properties.CONFIG != null) {
				        layer.bindPopup('<b>' + feature.properties.LABEL + '</b><br>' + 
				        	'<br><b>Address</b>: '+ feature.properties.ADDRESS +
				        	'<br><b>City</b>: '+ feature.properties.CITY +
				        	'<br><b>Grades</b>: ' + feature.properties.CONFIG +
				        	'<br><b>Description</b>: ' + feature.properties.MAP_DESC
				        	);
			    	}
			    	else {
			    		layer.bindPopup('<b>' + feature.properties.LABEL + '</b><br>' + 
				        	'<br><b>Address</b>: '+ feature.properties.ADDRESS +
				        	'<br><b>City</b>: '+ feature.properties.CITY +
				        	'<br><b>Grades</b>: ' + 'N/A' +
				        	'<br><b>Description</b>: ' + feature.properties.MAP_DESC
				        	);
			    	}
			    }
			    layer.on('mouseover', function (e) {
			    	this.openPopup();
			    	layer.setStyle(mouseStyle);
			    });
			    layer.on('mouseout', function (e) {
			    	this.closePopup();
			    	layer.setStyle(myStyle);
			    });
			}


        	var layer = L.tileLayer('http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png', { attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, &copy; <a href="https://carto.com/attributions">CARTO</a>' }); 
        	var map = L.map('mapid', { scrollWheelZoom: true, center: [34.1826, -118.4397], zoom: 11}); map.addLayer(layer);
        	var geojsonLayer = new L.GeoJSON.AJAX("lausd.geojson", {
        		onEachFeature:onEachFeature,
        		style: myStyle});
        	geojsonLayer.addTo(map);

		</script>

    </body>
</html>